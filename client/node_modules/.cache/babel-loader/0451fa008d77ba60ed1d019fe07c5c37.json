{"ast":null,"code":"var _jsxFileName = \"/Users/weas1/Desktop/sound-minds-auth/client/src/pages/SongDetails/SongDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext } from \"react\";\nimport Colors from \"../../components/Colors/Colors\";\nimport \"./song-details.css\";\nimport UserContext from \"../../helpers/UserContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SongDetails = props => {\n  _s();\n\n  const [trackLoading, setTrackLoading] = useState(true);\n  let trackId = props.match.params.trackId;\n  const [track, setTrack] = useState();\n  const [trackTitle, setTrackTitle] = useState();\n  const [trackArtist, setTrackArtist] = useState();\n  const [trackCover, setTrackCover] = useState();\n  const [trackAlbum, setTrackAlbum] = useState();\n  const user = useContext(UserContext); // const [favorited, setFavorited] = useState(false);\n\n  let favorited = false; // const [favoriteCount, setFavoriteCount] = useState(0);\n\n  useEffect(() => {\n    fetch(`https://thingproxy.freeboard.io/fetch/https://api.deezer.com/track/${trackId}`).then(res => res.json()).then(res => {\n      setTrack(res);\n      setTrackTitle(res.title);\n      setTrackArtist(res.artist.name);\n      setTrackCover(res.album.cover_xl);\n      setTrackAlbum(res.album.title);\n      document.title = `${res.title} - ${res.artist.name}`;\n      setTrackLoading(false);\n    });\n  }, [trackId]);\n  const trackInfo = {\n    favoritedBy: user.username,\n    trackId: trackId,\n    trackTitle: trackTitle,\n    trackArtist: trackArtist,\n    trackCover: trackCover,\n    trackAlbum: trackAlbum\n  };\n\n  for (let i = 0; i < user.favorites.length; i++) {\n    console.log(user.favorites);\n    console.log(typeof user.favorites[0].trackId);\n    console.log(typeof trackId);\n\n    if (user.favorites[i].trackId === Number(trackId)) {\n      favorited = true;\n    }\n  } // Create state for comments\n\n\n  const [commentList, setCommentList] = useState([]);\n  const [comment, setComment] = useState(\"\"); // useEffect to get all commnets where trackId matches\n\n  useEffect(() => {\n    axios.put(`http://localhost:5000/api/getComments`, {\n      trackId: trackId\n    }).then((res, err) => {\n      setCommentList(res.data.comment);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [trackId, setCommentList]); // handleChange func for adding new comments\n\n  const handleChange = e => {\n    setComment(e.currentTarget.value);\n  }; // onSubmit func to post new comments\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.put(\"http://localhost:5000/api/addComment\", {\n      trackId: trackId,\n      content: comment,\n      commentBy: user.username\n    });\n    window.location.reload();\n  };\n\n  const toggleFavorite = () => {\n    //Removing favorite\n    let arr = user.favorites;\n\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i].trackId === trackId) {\n        axios.post(\"http://localhost:5000/api/removeFavorite\", trackInfo);\n        window.location.reload();\n        return;\n      }\n    } //Adding favorite\n\n\n    axios.post(\"http://localhost:5000/api/addFavorite\", trackInfo);\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!trackLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"album-img\",\n        src: track.album.cover_xl,\n        alt: `${track.title} cover art`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"colors\",\n        style: {\n          marginLeft: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Colors, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          id: \"title\",\n          children: track.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"artist-name\",\n          children: [\"Artist: \", track.artist.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"album-name\",\n          children: [\"Album: \", track.album.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"date\",\n          children: [\"Released: \", track.album.release_date.substr(0, 4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"bottom-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://www.deezer.com/artist/4495513\",\n            rel: \"noreferrer\",\n            target: \"_blank\",\n            id: \"view-more\",\n            children: [\"See more from \", track.artist.name, \" on Deezer\\xAE\", /*#__PURE__*/_jsxDEV(\"img\", {\n              id: \"artist-pic\",\n              src: track.artist.picture,\n              alt: `${track.artist.name} icon`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"addFav\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleFavorite,\n              children: favorited ? \"Remove ðŸ”¥\" : \"Add ðŸ”¥\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          id: \"audioPreview\",\n          src: track.preview,\n          controls: true,\n          controlsList: \"nodownload noplaybackrate\",\n          children: \"Your browser does not support the audio element.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"commentSection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        id: \"commentHeader\",\n        children: \"Sound Off!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"newComment\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          onChange: handleChange,\n          id: \"commentText\",\n          placeholder: `What do you think?`,\n          value: comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"commentHeader\",\n        children: [commentList.length, \" comment(s)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), commentList.map((comment, key) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          className: \"commentBy\",\n          children: [comment.commentBy, \": \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"em\", {\n          className: \"content\",\n          children: comment.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SongDetails, \"09NE4fEyYEcAUxTGTMkQnDSRZtQ=\");\n\n_c = SongDetails;\nexport default SongDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"SongDetails\");","map":{"version":3,"sources":["/Users/weas1/Desktop/sound-minds-auth/client/src/pages/SongDetails/SongDetails.js"],"names":["useEffect","useState","useContext","Colors","UserContext","axios","SongDetails","props","trackLoading","setTrackLoading","trackId","match","params","track","setTrack","trackTitle","setTrackTitle","trackArtist","setTrackArtist","trackCover","setTrackCover","trackAlbum","setTrackAlbum","user","favorited","fetch","then","res","json","title","artist","name","album","cover_xl","document","trackInfo","favoritedBy","username","i","favorites","length","console","log","Number","commentList","setCommentList","comment","setComment","put","err","data","catch","handleChange","e","currentTarget","value","handleSubmit","preventDefault","content","commentBy","window","location","reload","toggleFavorite","arr","post","marginLeft","release_date","substr","picture","preview","map","key"],"mappings":"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","sourcesContent":["import { useEffect, useState, useContext } from \"react\";\nimport Colors from \"../../components/Colors/Colors\";\nimport \"./song-details.css\";\nimport UserContext from \"../../helpers/UserContext\";\nimport axios from \"axios\";\n\nconst SongDetails = (props) => {\n  const [trackLoading, setTrackLoading] = useState(true);\n  let trackId = props.match.params.trackId;\n\n  const [track, setTrack] = useState();\n  const [trackTitle, setTrackTitle] = useState();\n  const [trackArtist, setTrackArtist] = useState();\n  const [trackCover, setTrackCover] = useState();\n  const [trackAlbum, setTrackAlbum] = useState();\n  const user = useContext(UserContext);\n  // const [favorited, setFavorited] = useState(false);\n  let favorited = false;\n\n  // const [favoriteCount, setFavoriteCount] = useState(0);\n\n  useEffect(() => {\n    fetch(\n      `https://thingproxy.freeboard.io/fetch/https://api.deezer.com/track/${trackId}`\n    )\n      .then((res) => res.json())\n      .then((res) => {\n        setTrack(res);\n        setTrackTitle(res.title);\n        setTrackArtist(res.artist.name);\n        setTrackCover(res.album.cover_xl);\n        setTrackAlbum(res.album.title);\n        document.title = `${res.title} - ${res.artist.name}`;\n        setTrackLoading(false);\n      });\n  }, [trackId]);\n  const trackInfo = {\n    favoritedBy: user.username,\n    trackId: trackId,\n    trackTitle: trackTitle,\n    trackArtist: trackArtist,\n    trackCover: trackCover,\n    trackAlbum: trackAlbum,\n  };\n\n  for (let i = 0; i < user.favorites.length; i++) {\n    console.log(user.favorites);\n    console.log(typeof user.favorites[0].trackId);\n    console.log(typeof trackId);\n    if (user.favorites[i].trackId === Number(trackId)) {\n      favorited = true;\n    }\n  }\n\n  // Create state for comments\n  const [commentList, setCommentList] = useState([]);\n  const [comment, setComment] = useState(\"\");\n\n  // useEffect to get all commnets where trackId matches\n  useEffect(() => {\n    axios\n      .put(`http://localhost:5000/api/getComments`, {\n        trackId: trackId,\n      })\n      .then((res, err) => {\n        setCommentList(res.data.comment);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [trackId, setCommentList]);\n\n  // handleChange func for adding new comments\n  const handleChange = (e) => {\n    setComment(e.currentTarget.value);\n  };\n  // onSubmit func to post new comments\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    axios.put(\"http://localhost:5000/api/addComment\", {\n      trackId: trackId,\n      content: comment,\n      commentBy: user.username,\n    });\n    window.location.reload();\n  };\n\n  const toggleFavorite = () => {\n    //Removing favorite\n    let arr = user.favorites;\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i].trackId === trackId) {\n        axios.post(\"http://localhost:5000/api/removeFavorite\", trackInfo);\n\n        window.location.reload();\n        return;\n      }\n    }\n\n    //Adding favorite\n    axios.post(\"http://localhost:5000/api/addFavorite\", trackInfo);\n\n    window.location.reload();\n  };\n  return (\n    <div>\n      {!trackLoading ? (\n        <div id=\"main\">\n          <img\n            className=\"album-img\"\n            src={track.album.cover_xl}\n            alt={`${track.title} cover art`}\n          />\n          <div id=\"colors\" style={{ marginLeft: \"20px\" }}>\n            <Colors />\n          </div>\n\n          <div className=\"track-details\">\n            <h1 id=\"title\">{track.title}</h1>\n            <p id=\"artist-name\">Artist: {track.artist.name}</p>\n            <br />\n            <p id=\"album-name\">Album: {track.album.title}</p>\n            <br />\n            <p id=\"date\">Released: {track.album.release_date.substr(0, 4)}</p>\n            <br />\n            <div id=\"bottom-col\">\n              <a\n                href=\"https://www.deezer.com/artist/4495513\"\n                rel=\"noreferrer\"\n                target=\"_blank\"\n                id=\"view-more\"\n              >\n                See more from {track.artist.name} on DeezerÂ®\n                <img\n                  id=\"artist-pic\"\n                  src={track.artist.picture}\n                  alt={`${track.artist.name} icon`}\n                />\n              </a>\n              <div className=\"addFav\">\n                <button onClick={toggleFavorite}>\n                  {favorited ? \"Remove ðŸ”¥\" : \"Add ðŸ”¥\"}\n                </button>\n              </div>\n            </div>\n            <audio\n              id=\"audioPreview\"\n              src={track.preview}\n              controls\n              controlsList=\"nodownload noplaybackrate\"\n            >\n              Your browser does not support the audio element.\n            </audio>\n          </div>\n        </div>\n      ) : (\n        <h1 className=\"loading\">Loading...</h1>\n      )}\n      {/* COMMENT SECTION */}\n      <div className=\"commentSection\">\n        <h2 id=\"commentHeader\">Sound Off!</h2>\n        <form id=\"newComment\" onSubmit={handleSubmit}>\n          <textarea\n            onChange={handleChange}\n            id=\"commentText\"\n            placeholder={`What do you think?`}\n            value={comment}\n          ></textarea>\n          <button type=\"submit\">Submit</button>\n        </form>\n        <div id=\"commentHeader\">{commentList.length} comment(s)</div>\n        {commentList.map((comment, key) => (\n          <div className=\"comment\" key={key}>\n            <strong className=\"commentBy\">{comment.commentBy}: </strong>\n            <em className=\"content\">{comment.content}</em>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\nexport default SongDetails;\n"]},"metadata":{},"sourceType":"module"}